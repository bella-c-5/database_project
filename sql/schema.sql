CREATE TABLE USERS (
  username VARCHAR2(50) PRIMARY KEY
);

CREATE TABLE MOVIES (
  movie_id   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  title      VARCHAR2(200) NOT NULL,
  rating     NUMBER,
  director_id NUMBER
);

CREATE TABLE DIRECTORS (
  director_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  first_name  VARCHAR2(100) NOT NULL,
  last_name   VARCHAR2(100) NOT NULL
);

CREATE TABLE ACTORS (
  actor_id   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  first_name VARCHAR2(100) NOT NULL,
  last_name  VARCHAR2(100) NOT NULL
);

CREATE TABLE MOVIE_ACTOR (
  movie_id NUMBER NOT NULL,
  actor_id NUMBER NOT NULL,
  CONSTRAINT pk_movie_actor PRIMARY KEY (movie_id, actor_id),
  CONSTRAINT fk_ma_movie  FOREIGN KEY (movie_id) REFERENCES MOVIES(movie_id),
  CONSTRAINT fk_ma_actor  FOREIGN KEY (actor_id) REFERENCES ACTORS(actor_id)
);

CREATE TABLE USER_MOVIE (
  username VARCHAR2(50) NOT NULL,
  movie_id NUMBER NOT NULL,
  CONSTRAINT pk_user_movie PRIMARY KEY (username, movie_id),
  CONSTRAINT fk_um_user  FOREIGN KEY (username) REFERENCES USERS(username),
  CONSTRAINT fk_um_movie FOREIGN KEY (movie_id) REFERENCES MOVIES(movie_id)
);



